"use strict";(()=>{var e={};e.id=992,e.ids=[992],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},76162:e=>{e.exports=require("stream")},21764:e=>{e.exports=require("util")},81432:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>q,patchFetch:()=>w,requestAsyncStorage:()=>f,routeModule:()=>y,serverHooks:()=>S,staticGenerationAsyncStorage:()=>h});var n={};r.r(n),r.d(n,{POST:()=>m});var o=r(49303),s=r(88716),i=r(60670),a=r(23248),u=r(90839),p=r(87070),d=r(42023),l=r.n(d),c=r(41482),g=r.n(c);async function m(e){try{let{name:t,email:r,photoUrl:n}=await e.json(),o=await u.Z.findOne({email:r});if(o){let e={id:o._id,username:o.username,email:o.email},t=g().sign(e,"slfjskdfowru030nfowe",{expiresIn:"1d"}),{password:r,...n}=o._doc,s=p.NextResponse.json({message:"Login successful",success:!0,status:200,user:n});return s.cookies.set("token",t,{httpOnly:!0}),s}{let e=Math.random().toString(36).slice(-8),o=l().hashSync(e,10),s=new u.Z({name:t,email:r,password:o,photoUrl:n});await s.save();let i=g().sign({email:r},"slfjskdfowru030nfowe",{expiresIn:"1d"}),{password:a,...d}=s._doc,c=p.NextResponse.json({message:"User Created Successfully!",success:!0,status:200,user:d});return c.cookies.set("token",i,{httpOnly:!0}),c}}catch(e){return p.NextResponse.json({message:"Internal Error!"},{status:500})}}(0,a.$)();let y=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/signin_google/route",pathname:"/api/signin_google",filename:"route",bundlePath:"app/api/signin_google/route"},resolvedPagePath:"G:\\NextApp\\pathshala\\Pathshala\\src\\app\\api\\signin_google\\route.js",nextConfigOutput:"",userland:n}),{requestAsyncStorage:f,staticGenerationAsyncStorage:h,serverHooks:S}=y,q="/api/signin_google/route";function w(){return(0,i.patchFetch)({serverHooks:S,staticGenerationAsyncStorage:h})}},23248:(e,t,r)=>{r.d(t,{$:()=>s});var n=r(11185),o=r.n(n);async function s(){try{o().connect("mongodb+srv://sunnypatelkoder:sunnypatelkoder@cluster0.9gjeii7.mongodb.net/pathshala");let e=o().connection;e.on("connected",()=>{console.log("MONOG DB connceted successfully")}),e.on("error",e=>{console.log("MONOGO DB connection erorr. please make sure mongodb is runnign",+e)})}catch(e){console.log("Something went wrong"),console.log(e)}}},90839:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(11185),o=r.n(n);let s=new(o()).Schema({name:{type:String,required:[!0,"Please Provide a username"]},email:{type:String,required:[!0,"Please Provide a email"],unique:!0},password:{type:String,required:[!0,"Please Provide a password"]},phone:{type:String},photoUrl:{type:String,default:"/default-user.png"},isVerified:{type:Boolean,default:!1},isAdmin:{type:Boolean,default:!1},courses:[{category:{type:String,required:!0},name:{type:String,required:!0},duration:{type:String,required:!0},img1:{type:String,default:"/android.png.webp"},img2:{type:String,default:"/android.png.webp"},description:{type:String,required:!0},syllabus:[{chapter:{type:String,required:!0},topics:[{topicName:{type:String,required:!0},topicLink:{type:String,required:!0},topicProgress:{type:Boolean,default:!1}}]}],progress_status:{type:Number,default:0},createdAt:{type:Date,default:Date.now},certificates:[{certificateId:{type:String}}]}]}),i=o().models.User||o().model("User",s)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,972,23,482],()=>r(81432));module.exports=n})();